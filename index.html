<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>PadManiacs</title>
  <script src="./js/phaser.min.js"></script>
  <link rel="stylesheet" href="./css/style.css">
  <link rel="icon" href="./favicon.png">
</head>

<body>
  <div id="game"></div>
  
  <!-- Controller -->
  <div id="controller">
    <div id="controller_dpad">
      <div id="controller_left"></div>
      <div id="controller_right"></div>
      <div id="controller_up"></div>
      <div id="controller_down"></div>
    </div>
    <div id="controller_rhythm_pad">
      <div id="controller_rhythm_left" class="capsuleBtn rhythm"></div>
      <div id="controller_rhythm_down" class="capsuleBtn rhythm"></div>
      <div id="controller_rhythm_up" class="capsuleBtn rhythm"></div>
      <div id="controller_rhythm_right" class="capsuleBtn rhythm"></div>
    </div>
    <div id="controller_select" class="capsuleBtn">Select</div>
    <div id="controller_start" class="capsuleBtn">Start</div>
    <div id="controller_b" class="roundBtn">B</div>
    <div id="controller_a" class="roundBtn">A</div>
  </div>
  
  <!-- Debug Panel -->
  <div id="debug"></div>
  
  <script src="./js/eruda.js"></script>
  <script src="./js/constants.js"></script>
  <script>
    if (typeof window.eruda != 'undefined' && window.DEBUG) {
      eruda.init({
        tool: ['console', 'elements', 'resources', 'snippets']
      });
      const snippets = eruda.get('snippets');
      snippets.clear();
      snippets.add("Add performance text", () => {
        const text = new Text(190, 2, "");
        text.anchor.x = 1;
        game.time.events.loop(60, () => {
          const player = game.state.current == 'Play' ? game.state.getCurrentState().player : null;
          text.write(
            `FPS: ${game.time.fps}\n`
          );
        });
      }, "Displays performance information");
      snippets.add("Screenshoot", () => {
        var renderTexture = game.add.renderTexture(game.width, game.height, 'screenshotTemp');
        renderTexture.renderXY(game.world, 0, 0, true);
        var image = renderTexture.getBase64();
        var link = document.createElement('a');
        link.href = image;
        link.download = 'screenshot-' + Date.now() + '.png';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        renderTexture.destroy();
      }, "Take a screenshot");
      snippets.add("Destroy", () => {
        eruda.destroy();
      }, "Destroy eruda");
    }
  </script>
  <script src="./js/gamepad.js"></script>
  <script src="./js/filesystem.js"></script>
  <script src="./js/game.js"></script>
</body>

</html>